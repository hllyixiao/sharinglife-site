<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.com.sharinglife.mapper.CommentMapper" >

    <sql id="trim_field">
        <trim suffixOverrides=",">
            <if test="pId != null">pid,</if>
            <if test="articleId != null">articleid,</if>
            <if test="articleUserId != null">articleuserid,</if>
            <if test="ownerUserId != null">owneruserid,</if>
            <if test="userId != null">userid,</if>
            <if test="userName != null">username,</if>
            <if test="userAvatarUrl != null">useravatarurl,</if>
            <if test="content != null">content,</if>
            <if test="deleted != null">deleted,</if>
        </trim>
    </sql>
    <sql id="trim_data">
        <trim suffixOverrides=",">
            <if test="pId != null">#{pId},</if>
            <if test="articleId != null">#{articleId},</if>
            <if test="articleUserId != null">#{articleUserId},</if>
            <if test="ownerUserId != null">#{ownerUserId},</if>
            <if test="userId != null">#{userId},</if>
            <if test="userName != null">#{userName},</if>
            <if test="userAvatarUrl != null">#{userAvatarUrl},</if>
            <if test="content != null">#{content},</if>
            <if test="deleted != null">#{deleted},</if>
        </trim>
    </sql>

    <insert id="addComment" parameterType="comment">
        INSERT INTO comment (
        <include refid="trim_field"/>
        )
        VALUES (
        <include refid="trim_data"/>
        )
    </insert>

    <update id="deleteComment" parameterType="integer">
        UPDATE comment SET delete = 1 WHERE id = #{commentId}
    </update>
</mapper>